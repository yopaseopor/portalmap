<!DOCTYPE html>
<html>
<head>
    <title>Test Map - No CSP</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v7.5.2/ol.css" />
    <script src="https://cdn.jsdelivr.net/npm/ol@v7.5.2/dist/ol.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ol-mapbox-style@10.7.0/dist/olms.js"></script>
    <style>
        body, html, #map {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        console.log('Testing map without CSP restrictions...');

        // Test sprite loading
        fetch('src/assets/sprites/basics/sprites.json')
            .then(response => response.json())
            .then(data => {
                console.log('‚úÖ Sprites loaded successfully!');
                console.log(`üìä Found ${Object.keys(data).length} sprite definitions`);
            })
            .catch(error => {
                console.error('‚ùå Error loading sprites:', error);
            });

        // Initialize map with colorful style
        fetch('src/assets/colorful.json')
            .then(response => response.json())
            .then(style => {
                console.log('‚úÖ Style loaded successfully');

                const map = new ol.Map({
                    target: 'map',
                    view: new ol.View({
                        center: ol.proj.fromLonLat([1.59647, 41.69689]),
                        zoom: 8
                    }),
                    layers: []
                });

                olms.applyStyle(map, style, 'versatiles-shortbread')
                    .then(() => {
                        console.log('‚úÖ Map style applied successfully!');
                        console.log('üéâ Map should now display with sprites working');
                    })
                    .catch(error => {
                        console.error('‚ùå Error applying style:', error);
                    });
            })
            .catch(error => {
                console.error('‚ùå Error loading style:', error);
            });
    </script>
</body>
</html>
